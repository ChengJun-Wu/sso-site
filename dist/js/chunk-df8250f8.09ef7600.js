(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df8250f8"],{"024e":function(t,e,n){},"1dde":function(t,e,n){var r=n("d039"),a=n("b622"),o=n("2d00"),i=a("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").filter,o=n("1dde"),i=o("filter");r({target:"Array",proto:!0,forced:!i},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5424:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));n("159b"),n("4de4"),n("99af"),n("6062"),n("d3b7"),n("3ca3"),n("ddb0");function r(t,e){var n=[];return t.forEach((function(t){n.push(t[e])})),n}function a(t,e){return new Set(e).has(t)}},6062:function(t,e,n){"use strict";var r=n("6d61"),a=n("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(t,e,n){"use strict";var r=n("9bf2").f,a=n("7c73"),o=n("e2cc"),i=n("0366"),u=n("19aa"),c=n("2266"),s=n("7dd0"),l=n("2626"),f=n("83ab"),d=n("f183").fastKey,h=n("69f3"),v=h.set,p=h.getterFor;t.exports={getConstructor:function(t,e,n,s){var l=t((function(t,r){u(t,l,e),v(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=r&&c(r,t[s],{that:t,AS_ENTRIES:n})})),h=p(e),b=function(t,e,n){var r,a,o=h(t),i=m(t,e);return i?i.value=n:(o.last=i={index:a=d(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=i),r&&(r.next=i),f?o.size++:t.size++,"F"!==a&&(o.index[a]=i)),t},m=function(t,e){var n,r=h(t),a=d(e);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){var t=this,e=h(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,n=h(e),r=m(e,t);if(r){var a=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=a),a&&(a.previous=o),n.first==r&&(n.first=a),n.last==r&&(n.last=o),f?n.size--:e.size--}return!!r},forEach:function(t){var e,n=h(this),r=i(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),o(l.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),f&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",a=p(e),o=p(r);s(t,e,(function(t,e){v(this,{type:r,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"6d61":function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("94ca"),i=n("6eeb"),u=n("f183"),c=n("2266"),s=n("19aa"),l=n("861d"),f=n("d039"),d=n("1c7e"),h=n("d44e"),v=n("7156");t.exports=function(t,e,n){var p=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),m=p?"set":"add",y=a[t],g=y&&y.prototype,k=y,x={},j=function(t){var e=g[t];i(g,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return b&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})},I=o(t,"function"!=typeof y||!(b||g.forEach&&!f((function(){(new y).entries().next()}))));if(I)k=n.getConstructor(e,t,p,m),u.REQUIRED=!0;else if(o(t,!0)){var O=new k,w=O[m](b?{}:-0,1)!=O,E=f((function(){O.has(1)})),_=d((function(t){new y(t)})),R=!b&&f((function(){var t=new y,e=5;while(e--)t[m](e,e);return!t.has(-0)}));_||(k=e((function(e,n){s(e,k,t);var r=v(new y,e,k);return void 0!=n&&c(n,r[m],{that:r,AS_ENTRIES:p}),r})),k.prototype=g,g.constructor=k),(E||R)&&(j("delete"),j("has"),p&&j("get")),(R||w)&&j(m),b&&g.clear&&delete g.clear}return x[t]=k,r({global:!0,forced:k!=y},x),h(k,t),b||n.setStrong(k,t,p),k}},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var o,i;return a&&"function"==typeof(o=e.constructor)&&o!==n&&r(i=o.prototype)&&i!==n.prototype&&a(t,i),t}},8418:function(t,e,n){"use strict";var r=n("c04e"),a=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var i=r(e);i in t?a.f(t,i,o(0,n)):t[i]=n}},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),o=n("e8b5"),i=n("861d"),u=n("7b0b"),c=n("50c4"),s=n("8418"),l=n("65f0"),f=n("1dde"),d=n("b622"),h=n("2d00"),v=d("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",m=h>=51||!a((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),y=f("concat"),g=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:o(t)},k=!m||!y;r({target:"Array",proto:!0,forced:k},{concat:function(t){var e,n,r,a,o,i=u(this),f=l(i,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],g(o)){if(a=c(o.length),d+a>p)throw TypeError(b);for(n=0;n<a;n++,d++)n in o&&s(f,d,o[n])}else{if(d>=p)throw TypeError(b);s(f,d++,o)}return f.length=d,f}})},a326:function(t,e,n){},a973:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-3"},[n("Row",[n("Col",{staticClass:"pl-2",attrs:{span:"3"}},[n("Input",{attrs:{placeholder:"权限key"},model:{value:t.query.auth_key,callback:function(e){t.$set(t.query,"auth_key",e)},expression:"query.auth_key"}})],1),n("Col",{staticClass:"pl-2",attrs:{span:"3"}},[n("Input",{attrs:{placeholder:"名称"},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}})],1),n("Col",{staticClass:"pl-2",attrs:{span:"3"}},[n("Input",{attrs:{placeholder:"说明"},model:{value:t.query.desc,callback:function(e){t.$set(t.query,"desc",e)},expression:"query.desc"}})],1),n("Col",{staticClass:"d-flex justify-content-start",attrs:{span:"3"}},[n("Button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.fetch}},[t._v("筛选")]),n("Button",{staticClass:"mx-2",on:{click:t.reset}},[t._v("清空")]),n("Button",{on:{click:t.add}},[t._v("新增")])],1)],1),n("Divider"),n("Table",{attrs:{border:"",columns:t.columns,data:t.auths,loading:t.loading},scopedSlots:t._u([{key:"Enable",fn:function(e){var r=e.row;return[1===r.Enable?n("Tag",{attrs:{color:"success"}},[t._v("使用中")]):t._e(),0===r.Enable?n("Tag",{attrs:{color:"error"}},[t._v("已废弃")]):t._e()]}},{key:"Action",fn:function(e){var r=e.row;return[n("Button",{attrs:{ghost:"",size:"small",type:"primary"},on:{click:function(e){return t.modify(r)}}},[t._v("修改")]),n("Button",{staticClass:"ml-2",attrs:{ghost:"",size:"small",type:"success"},on:{click:function(e){return t.linkRoute(r)}}},[t._v("关联路由")])]}}])}),n("div",{staticClass:"d-flex justify-content-end mt-2"},[n("Page",{attrs:{total:t.total,current:t.query.page,"page-size":t.query.limit},on:{"on-change":t.pageChange}})],1),n("Modal",{attrs:{title:"修改 / 新增",width:"400","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Form",[n("FormItem",{attrs:{label:"权限key"}},[n("Input",{model:{value:t.current.AuthKey,callback:function(e){t.$set(t.current,"AuthKey",e)},expression:"current.AuthKey"}})],1),n("FormItem",{attrs:{label:"名称"}},[n("Input",{model:{value:t.current.Name,callback:function(e){t.$set(t.current,"Name",e)},expression:"current.Name"}})],1),n("FormItem",{attrs:{label:"说明"}},[n("Input",{model:{value:t.current.Desc,callback:function(e){t.$set(t.current,"Desc",e)},expression:"current.Desc"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",size:"small",long:"",loading:t.modal_loading},on:{click:t.save}},[t._v("保存")])],1)],1),n("VAuthRouteLinker",{ref:"linker"})],1)},a=[],o=n("f825"),i=n("365c"),u=n("ffe9"),c=n("da2a"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"关联路由","class-name":"vertical-center-modal",width:"800"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Transfer",{staticClass:"d-flex justify-content-center",attrs:{titles:["未关联","已关联"],data:t.routes,"target-keys":t.authRoutes,filterable:""},on:{"on-change":t.onChange}}),n("div",{attrs:{slot:"footer"},slot:"footer"})],1)},l=[],f=(n("159b"),n("5424")),d={name:"vAuthRouteLinker",components:{Modal:o["Modal"],Transfer:o["Transfer"]},data:function(){return{modal:!1,routes:[],authRoutes:[],auth:null}},methods:{enable:function(t){this.auth=t,this.fetchRoutes(),this.fetchAuthRoutes(),this.modal=!0},fetchRoutes:function(){var t=this;Object(i["a"])({limit:1e4}).get(u["d"]).then((function(e){Object(c["c"])(e)&&(e.data.data.forEach((function(t){return t.key=t.ID,t.label=t.Path+" | "+t.Method+" | "+t.Desc,t})),t.routes=e.data.data)}))},fetchAuthRoutes:function(){var t=this;Object(i["a"])({limit:1e4}).get(Object(u["j"])(u["c"],this.auth.ID)).then((function(e){Object(c["c"])(e)&&(t.authRoutes=Object(f["a"])(e.data.data,"RouteId"))}))},onChange:function(t){var e=[],n=[],r=[];this.authRoutes.forEach((function(r){Object(f["b"])(r,t)?n.push(r):e.push(r)})),t.forEach((function(t){Object(f["b"])(t,n)||r.push(t)})),this.modify(e,r),this.authRoutes=t},modify:function(t,e){var n=this;t.forEach((function(t){Object(i["a"])({}).delete(Object(u["i"])(Object(u["j"])(u["c"],n.auth.ID),t)).then((function(t){}))})),e.forEach((function(t){Object(i["a"])({}).put(Object(u["i"])(Object(u["j"])(u["c"],n.auth.ID),t)).then((function(t){}))}))}}},h=d,v=(n("ebee"),n("2877")),p=Object(v["a"])(h,s,l,!1,null,null,null),b=p.exports,m={name:"auth",components:{VAuthRouteLinker:b,Divider:o["Divider"],Row:o["Row"],Col:o["Col"],Button:o["Button"],Input:o["Input"],Table:o["Table"],Tag:o["Tag"],Page:o["Page"],Modal:o["Modal"],Form:o["Form"],FormItem:o["FormItem"]},computed:{columns:function(){return[{title:"ID",key:"ID",align:"center"},{title:"权限key",key:"AuthKey",align:"center"},{title:"名称",key:"Name",align:"center"},{title:"说明",key:"Desc",align:"center"},{title:"操作",slot:"Action",align:"center"}]}},data:function(){return{query:{auth_key:null,name:null,desc:null,page:1,limit:10},loading:!1,auths:[],total:0,modal:!1,modal_loading:!1,current:{},visible:!1}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.loading=!0,Object(i["a"])(this.query).get(u["b"]).then((function(e){Object(c["c"])(e)&&(t.auths=e.data.data,t.total=e.data.total),t.loading=!1}))},selectAppId:function(t){this.query.app_id=t},modify:function(t){var e=this;Object(i["a"])({}).get(Object(u["i"])(u["b"],t.ID)).then((function(t){Object(c["c"])(t)&&(e.current=t.data.data,e.modal=!0)}))},add:function(){this.current={},this.modal=!0},save:function(){this.current.ID?this.update():this.store()},update:function(){var t=this;this.modal_loading=!0,Object(i["a"])(this.current).put(Object(u["i"])(u["b"],this.current.ID)).then((function(e){Object(c["b"])(e),t.modal_loading=!1,t.modal=!1,t.fetch()}))},store:function(){var t=this;this.modal_loading=!0,Object(i["a"])(this.current).post(u["b"]).then((function(e){Object(c["b"])(e),t.modal_loading=!1,t.modal=!1,t.fetch()}))},linkRoute:function(t){this.$refs.linker.enable(t)},reset:function(){this.query={},this.fetch()},pageChange:function(t){this.query.page=t,this.fetch()}}},y=m,g=(n("ca9c"),Object(v["a"])(y,r,a,!1,null,null,null));e["default"]=g.exports},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},ca9c:function(t,e,n){"use strict";n("024e")},ebee:function(t,e,n){"use strict";n("a326")},f183:function(t,e,n){var r=n("d012"),a=n("861d"),o=n("5135"),i=n("9bf2").f,u=n("90e3"),c=n("bb2f"),s=u("meta"),l=0,f=Object.isExtensible||function(){return!0},d=function(t){i(t,s,{value:{objectID:"O"+ ++l,weakData:{}}})},h=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,s)){if(!f(t))return"F";if(!e)return"E";d(t)}return t[s].objectID},v=function(t,e){if(!o(t,s)){if(!f(t))return!0;if(!e)return!1;d(t)}return t[s].weakData},p=function(t){return c&&b.REQUIRED&&f(t)&&!o(t,s)&&d(t),t},b=t.exports={REQUIRED:!1,fastKey:h,getWeakData:v,onFreeze:p};r[s]=!0}}]);
//# sourceMappingURL=chunk-df8250f8.09ef7600.js.map