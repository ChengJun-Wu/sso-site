(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e0bb79"],{8446:function(t,e,n){},b795:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-3"},[n("Row",[n("Col",{attrs:{span:"3"}},[n("vAppSelector",{on:{"on-change":t.selectAppId}})],1),n("Col",{staticClass:"pl-2",attrs:{span:"3"}},[n("Input",{attrs:{placeholder:"输入路由"},model:{value:t.query.path,callback:function(e){t.$set(t.query,"path",e)},expression:"query.path"}})],1),n("Col",{staticClass:"d-flex justify-content-start",attrs:{span:"3"}},[n("Button",{staticClass:"mx-2",attrs:{type:"primary"},on:{click:t.fetch}},[t._v("筛选")]),n("Button",{on:{click:t.reset}},[t._v("清空")])],1)],1),n("Divider"),n("Table",{attrs:{border:"",columns:t.columns,data:t.routes,loading:t.loading},scopedSlots:t._u([{key:"Enable",fn:function(e){var a=e.row;return[1===a.Enable?n("Tag",{attrs:{color:"success"}},[t._v("使用中")]):t._e(),0===a.Enable?n("Tag",{attrs:{color:"error"}},[t._v("已废弃")]):t._e()]}},{key:"Action",fn:function(e){var a=e.row;return[n("Button",{attrs:{ghost:"",size:"small",type:"primary"},on:{click:function(e){return t.modify(a)}}},[t._v("修改")])]}}])}),n("div",{staticClass:"d-flex justify-content-end mt-2"},[n("Page",{attrs:{total:t.total,current:t.query.page,"page-size":t.query.limit},on:{"on-change":t.pageChange}})],1),n("Modal",{attrs:{title:"修改",width:"400","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Form",[n("FormItem",{attrs:{label:"说明"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:t.current.Desc,callback:function(e){t.$set(t.current,"Desc",e)},expression:"current.Desc"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",size:"small",long:"",loading:t.modal_loading},on:{click:t.update}},[t._v("保存")])],1)],1)],1)},o=[],l=n("f825"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Select",{attrs:{placeholder:"选择项目"},on:{"on-change":t.onChange},model:{value:t.appId,callback:function(e){t.appId=e},expression:"appId"}},t._l(t.apps,(function(e){return n("Option",{key:e.ID,attrs:{value:e.ID}},[t._v(t._s(e.Name))])})),1)},i=[],r=n("ffe9"),s=n("365c"),u={name:"vAppSelector",components:{Select:l["Select"],Option:l["Option"]},data:function(){return{apps:[],appId:null}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;Object(s["a"])({limit:1e3}).get(r["a"]).then((function(e){t.apps=e.data.data}))},onChange:function(t){this.$emit("on-change",t)}}},d=u,p=n("2877"),f=Object(p["a"])(d,c,i,!1,null,"62feb96f",null),m=f.exports,h=n("da2a"),g={name:"Route",components:{vAppSelector:m,Divider:l["Divider"],Row:l["Row"],Col:l["Col"],Button:l["Button"],Input:l["Input"],Table:l["Table"],Tag:l["Tag"],Page:l["Page"],Modal:l["Modal"],Form:l["Form"],FormItem:l["FormItem"]},computed:{columns:function(){return[{title:"ID",key:"ID",align:"center"},{title:"路由",key:"Path",align:"center"},{title:"说明",key:"Desc",align:"center"},{title:"方法",key:"Method",align:"center"},{title:"状态",slot:"Enable",align:"center"},{title:"操作",slot:"Action",align:"center"}]}},data:function(){return{query:{app_id:null,path:null,page:1,limit:10},loading:!1,routes:[],total:0,modal:!1,modal_loading:!1,current:{}}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.loading=!0,Object(s["a"])(this.query).get(r["d"]).then((function(e){Object(h["c"])(e)&&(t.routes=e.data.data,t.total=e.data.total),t.loading=!1}))},selectAppId:function(t){this.query.app_id=t},modify:function(t){var e=this;Object(s["a"])({}).get(Object(r["i"])(r["d"],t.ID)).then((function(t){Object(h["c"])(t)&&(e.current=t.data.data,e.modal=!0)}))},update:function(){var t=this;this.modal_loading=!0,Object(s["a"])(this.current).put(Object(r["i"])(r["d"],this.current.ID)).then((function(e){Object(h["b"])(e),t.modal_loading=!1,t.modal=!1,t.fetch()}))},reset:function(){this.query={},this.fetch()},pageChange:function(t){this.query.page=t,this.fetch()}}},b=g,v=(n("fc33"),Object(p["a"])(b,a,o,!1,null,null,null));e["default"]=v.exports},fc33:function(t,e,n){"use strict";n("8446")}}]);
//# sourceMappingURL=chunk-11e0bb79.311f4a5a.js.map